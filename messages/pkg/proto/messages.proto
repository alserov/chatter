syntax = "proto3";

option go_package = "github.com/alserov/chatter/messages/pkg/proto/gen;messages";

import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";

service Messages {
  rpc CreateMessage(Message) returns(google.protobuf.Empty);
  rpc DeleteMessage(Delete) returns (google.protobuf.Empty);
  rpc EditMessage(Edit) returns (google.protobuf.Empty);
  rpc GetMessages(GetParams) returns (MessagesRes);
}

message Message {
  string id = 1;
  string chat_id = 2;
  string user_id = 3;
  bytes value = 4;
  google.protobuf.Timestamp created_at = 5;
  google.protobuf.Timestamp modified_at = 6;
  uint32 type = 7;
//  repeated bytes attached_files = 7;
}

message MessagesRes {
  repeated Message Messages = 1;
}

message GetParams {
  string chat_id = 1;
  google.protobuf.Timestamp from = 2;
  google.protobuf.Timestamp to = 3;
}

message Edit {
  string id = 1;
  string value = 3;
}

message Delete {
  string id = 1;
}
